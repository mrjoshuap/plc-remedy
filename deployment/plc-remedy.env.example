# PLC Self-Healing Middleware Environment Variables
# Copy this file to plc-remedy.env and customize for your environment
# This file is loaded by the systemd service via --env-file

# =============================================================================
# Flask Application Configuration
# =============================================================================

# Flask secret key for session management (REQUIRED in production)
# Generate a secure random key: python3 -c "import secrets; print(secrets.token_hex(32))"
FLASK_SECRET_KEY=your-secret-key-change-in-production

# =============================================================================
# PLC Configuration
# =============================================================================

# PLC IP address (REQUIRED)
PLC_IP_ADDRESS=192.168.1.100

# PLC slot number (typically 0)
PLC_SLOT=0

# Connection timeout in seconds
PLC_TIMEOUT=5.0

# Polling interval in milliseconds
PLC_POLL_INTERVAL_MS=1000

# Enable mock mode for testing (use "true" or "false")
# Set to "true" when using mock PLC simulator
PLC_MOCK_MODE=false

# Protocol mode: "default" or "serial"
# "default": Use pycomm3's default protocol (may use MSP for supported PLCs)
# "serial": Force Micro800 mode, disable MSP, use serial methods
PLC_PROTOCOL_MODE=default

# =============================================================================
# Tag Configuration
# =============================================================================
# Tag-specific environment variables use the format: TAG_<tag_key>_<field>
# Example: TAG_LIGHT_NAME, TAG_LIGHT_NOMINAL, TAG_MOTOR_SPEED_NAME, etc.

# Light tag configuration
TAG_LIGHT_NAME=Light_Status
TAG_LIGHT_TYPE=bool
TAG_LIGHT_NOMINAL=true
TAG_LIGHT_FAILURE_CONDITION=equals
TAG_LIGHT_FAILURE_VALUE=false

# Motor speed tag configuration
TAG_MOTOR_SPEED_NAME=Motor_Speed
TAG_MOTOR_SPEED_TYPE=int
TAG_MOTOR_SPEED_NOMINAL=1750
TAG_MOTOR_SPEED_FAILURE_CONDITION=outside_range
TAG_MOTOR_SPEED_FAILURE_THRESHOLD_LOW=1500
TAG_MOTOR_SPEED_FAILURE_THRESHOLD_HIGH=2000

# Motor direction tag configuration
TAG_MOTOR_DIRECTION_NAME=Motor_Direction
TAG_MOTOR_DIRECTION_TYPE=int
TAG_MOTOR_DIRECTION_NOMINAL=1
TAG_MOTOR_DIRECTION_FAILURE_CONDITION=not_equals
TAG_MOTOR_DIRECTION_FAILURE_VALUE=1

# =============================================================================
# Ansible Automation Platform (AAP) Configuration
# =============================================================================

# Enable AAP integration (use "true" or "false")
AAP_ENABLED=true

# Use mock AAP responses (use "true" or "false")
# Set to "false" for real AAP integration
AAP_MOCK_MODE=true

# AAP base URL (only used if AAP_MOCK_MODE=false)
AAP_BASE_URL=https://aap.example.com

# Verify SSL certificates (use "true" or "false")
AAP_VERIFY_SSL=true

# AAP authentication token (REQUIRED if AAP_MOCK_MODE=false)
AAP_TOKEN=

# AAP Job Template IDs
AAP_JOB_TEMPLATE_EMERGENCY_STOP=42
AAP_JOB_TEMPLATE_EMERGENCY_RESET=43
AAP_JOB_TEMPLATE_EMERGENCY_RESTART=44
AAP_JOB_TEMPLATE_GATHER_METRICS=45

# =============================================================================
# Remediation Configuration
# =============================================================================

# Automatically trigger remediation on violations (use "true" or "false")
# "false": Manual trigger only (default)
# "true": Automatically trigger remediation when violations are detected
REMEDIATION_AUTO_REMEDIATE=false

# Minimum time between remediations in seconds
REMEDIATION_COOLDOWN_SECONDS=30

# Maximum retry attempts for failed remediations
REMEDIATION_MAX_RETRIES=3

# =============================================================================
# Chaos Engineering Configuration
# =============================================================================

# Enable chaos engineering / failure injection (use "true" or "false")
CHAOS_ENABLED=false

# Probability of failure injection per poll cycle (0.0 to 1.0)
# Example: 0.05 = 5% chance per poll cycle
CHAOS_FAILURE_INJECTION_RATE=0.05

# Comma-separated list of failure types to inject
# Options: value_anomaly, network_timeout, connection_loss, service_crash
# WARNING: service_crash should be used with caution!
CHAOS_FAILURE_TYPES=value_anomaly,network_timeout,connection_loss,service_crash

# Timeout duration for network_timeout injection in milliseconds
CHAOS_NETWORK_TIMEOUT_MS=5000

# Duration for connection_loss injection in seconds
CHAOS_ANOMALY_DURATION_SECONDS=10

# =============================================================================
# Dashboard Configuration
# =============================================================================

# Dashboard refresh interval in milliseconds
DASHBOARD_REFRESH_INTERVAL_MS=1000

# How long to retain historical data in hours
DASHBOARD_HISTORY_RETENTION_HOURS=24

# Number of data points to show in charts
DASHBOARD_CHART_DATA_POINTS=100

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOGGING_LEVEL=INFO

# Log message format (Python logging format string)
LOGGING_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
