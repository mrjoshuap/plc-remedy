# Testing Configuration - Uses All Mocks
# This configuration is designed for testing without requiring real PLC or AAP
# Copy this to config.yaml for local testing

plc:
  ip_address: "127.0.0.1"  # Localhost for mock PLC simulator
  slot: 0
  timeout: 5.0
  poll_interval_ms: 1000    # 1 second polling for testing
  mock_mode: true            # Enable graceful handling of unsupported CIP services (Multiple Service Packet, etc.)
  protocol_mode: "serial"   # Protocol mode (will be overridden by mock_mode anyway)

tags:
  # Light status tag - boolean
  light:
    name: "Light_Status"
    type: "bool"
    nominal: true
    failure_condition: "equals"
    failure_value: false

  # Motor speed tag - integer with range
  motor_speed:
    name: "Motor_Speed"
    type: "int"
    nominal: 1750
    failure_condition: "outside_range"
    failure_threshold_low: 1500
    failure_threshold_high: 2000

  # Motor direction tag - integer
  motor_direction:
    name: "Motor_Direction"
    type: "int"              # 0=stopped, 1=forward, 2=reverse
    nominal: 1               # Expected direction (forward)
    failure_condition: "not_equals"
    failure_value: 1         # Not used for not_equals, but kept for consistency

aap:
  enabled: true
  mock_mode: true            # Use mock AAP responses (no real AAP needed)
  base_url: "http://localhost:8080"  # Mock AAP server (if running separately)
  verify_ssl: false          # Not needed for mock
  token: "mock-token-for-testing"     # Not used in mock mode
  job_templates:
    emergency_stop: 42
    emergency_reset: 43
    emergency_restart: 44
    gather_metrics: 45

remediation:
  auto_remediate: false      # Manual trigger only for testing
  cooldown_seconds: 10       # Shorter cooldown for testing
  max_retries: 3

chaos:
  enabled: true              # Enable chaos for testing failure scenarios
  failure_injection_rate: 0.1  # 10% chance per poll cycle (higher for testing)
  failure_types:
    - value_anomaly          # Inject out-of-range values
    - network_timeout        # Simulate network timeouts
    - connection_loss        # Simulate connection loss
    # - service_crash        # Commented out - too dangerous for testing
  network_timeout_ms: 3000   # Shorter timeout for testing
  anomaly_duration_seconds: 5 # Shorter duration for testing

dashboard:
  refresh_interval_ms: 1000
  history_retention_hours: 1  # Shorter retention for testing
  chart_data_points: 50      # Fewer data points for testing

logging:
  level: DEBUG                # DEBUG level for testing to see all debug messages
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  failure_value: 1         # Not used for not_equals, but kept for consistency

aap:
  enabled: true
  mock_mode: true            # Use mock AAP responses (no real AAP needed)
  base_url: "http://localhost:8080"  # Mock AAP server (if running separately)
  verify_ssl: false          # Not needed for mock
  token: "mock-token-for-testing"     # Not used in mock mode
  job_templates:
    emergency_stop: 42
    emergency_reset: 43
    emergency_restart: 44
    gather_metrics: 45

remediation:
  auto_remediate: true      # false = Manual trigger only for testing
  cooldown_seconds: 10       # Shorter cooldown for testing
  max_retries: 3

chaos:
  enabled: true              # Enable chaos for testing failure scenarios
  failure_injection_rate: 0.1  # 10% chance per poll cycle (higher for testing)
  failure_types:
    - value_anomaly          # Inject out-of-range values
    - network_timeout        # Simulate network timeouts
    - connection_loss        # Simulate connection loss
    # - service_crash        # Commented out - too dangerous for testing
  network_timeout_ms: 3000   # Shorter timeout for testing
  anomaly_duration_seconds: 5 # Shorter duration for testing

dashboard:
  refresh_interval_ms: 1000
  history_retention_hours: 1  # Shorter retention for testing
  chart_data_points: 50      # Fewer data points for testing

logging:
  level: DEBUG                # DEBUG level for testing to see all debug messages
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
